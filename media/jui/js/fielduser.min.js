function jSelectUser(e){var t=jQuery(e),n=t.data("user-value"),r=t.data("user-name"),i=t.data("user-field"),s=jQuery("#"+i+"_id"),o=jQuery("#"+i+"_name");if(!s.length)return;s.val(n).trigger("change"),o.val(r||n).trigger("change");var u=s.attr("data-onchange"),a;u&&(a=new Function(u),a.call(s[0])),jModalClose()}(function(e){"use strict";e.fieldUser=function(t,n){this.options=e.extend({},e.fieldUser.defaults,n),this.$container=e(t),this.$modal=this.$container.find(this.options.modal),this.$modalBody=this.$modal.children(".modal-body"),this.$input=this.$container.find(this.options.input),this.$inputName=this.$container.find(this.options.inputName),this.$buttonSelect=this.$container.find(this.options.buttonSelect),this.$buttonSelect.on("click",this.modalOpen.bind(this));var r=this.$input.attr("data-onchange"),i;r&&(i=new Function(r),this.$input.on("change",i.bind(this.$input)))},e.fieldUser.prototype.modalOpen=function(){var t=e("<iframe>",{name:"field-user-modal",src:this.options.url.replace("{field-user-id}",this.$input.attr("id")),width:this.options.modalWidth,height:this.options.modalHeight});this.$modalBody.append(t),this.$modal.modal("show");var n=this;t.load(function(){var t=e(this).contents();t.on("click",".button-select",function(){n.setValue(e(this).data("user-value"),e(this).data("user-name")),n.modalClose()})})},e.fieldUser.prototype.modalClose=function(){this.$modal.modal("hide"),this.$modalBody.empty()},e.fieldUser.prototype.setValue=function(e,t){this.$input.val(e).trigger("change"),this.$inputName.val(t||e).trigger("change")},e.fieldUser.defaults={buttonSelect:".button-select",input:".field-user-input",inputName:".field-user-input-name",modal:".modal",url:"index.php?option=com_users&view=users&layout=modal&tmpl=component",modalWidth:"100%",modalHeight:"300px"},e.fn.fieldUser=function(t){return this.each(function(){var t=e(this),n=t.data("fieldUser");if(!n){var r=r||{},i=t.data();for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);n=new e.fieldUser(this,r),t.data("fieldUser",n)}})},e(document).ready(function(){e(".field-user-wrapper").fieldUser()})})(jQuery);